# 23万件データクレンジング（初期コスト）— Azureコストのみ試算（概算）

更新日：2026-01-17  
対象：保全データ **23万件** のクレンジングを **Azure上でバッチ実行**する際の「クラウド利用料（Azure課金）」のみを概算します。  
※ 人件費（設計・実装・レビュー・運用設計等）は本資料の範囲外です。

---

## 1. 試算の範囲（Azure課金に含める／含めない）

### 1.1 含める（Azure課金）
- **バッチ実行の計算資源**（例：Azure Functions Consumption での実行）
- **データ保存**（Azure Blob Storage：入力・中間・出力）
- **（必要に応じて）監視ログ**（Azure Monitor / Application Insights 等）※本資料では「量」のみ

### 1.2 含めない（別途）
- 人件費（要件定義、辞書・マスタ設計、アルゴリズム開発、レビュー対応 等）
- Power Platform / Power BI のライセンス費用
- Azure OpenAI / Azure AI Search など **別サービスの従量課金**  
  - 例：生成AIで「分類・標準化」を23万件に対して実行する場合、**トークン課金**が支配的になり得ます（別見積）。

---

## 2. 前提条件（提案書に記載できるよう明確化）

### 2.1 実行方式（前提）
- Pythonバッチは **Azure Functions（Consumption）** で「ジョブ実行（Durable等で分割実行）」する想定  
  - Consumption は **GB-second（GB-s）** による従量課金で、月次の無料枠があります。  
    Azure Functions の価格ページに、Consumption の無料枠（400,000 GB-s／月、1,000,000 実行／月）が記載されています。  
    また、例として「1.1 million GB-s が $17.6」と示されており、単価は **約 $0.000016 / GB-s**（$17.6 ÷ 1,100,000）と読み取れます。  
    参考：Functions pricing page（Consumption pricing example）。  
    - 無料枠：400,000 GB-s／月、1,000,000 実行／月（サブスクリプション単位）  
    - 例：1.1 million GB-s → $17.6  
    citeturn2view1

> 注：実際には、同一サブスクリプション内の他ワークロードが無料枠を消費している場合があり得ます。  
> 本試算では **(A)無料枠を考慮** と **(B)無料枠なし（追加費用として最大側）** の両方を併記します。

### 2.2 データの量（前提）
- 入力（生データ）：1〜2 GB（CSV/Parquet 等）
- 中間成果物＋出力（クレンジング済み＋マスタ類）：2〜5 GB
- 合計保存：**5 GB** を代表値とします（必要に応じて置換）。

---

## 3. Azure Blob Storage（保存・操作）コスト（概算）

### 3.1 保存コスト（Hot、Standardの例）
Azure Blob Storage の価格ページでは、Standard Hot のデータ ストレージ料金（最初の 50 TB/月）が **$0.018 / GB** と例示されています。価格はリージョン等で変動し得る旨も記載されています。 citeturn0search1

- 保存量：5 GB  
- 月額：5 × $0.018 = **$0.09 / 月**

> 提案書では「最終単価は、契約・リージョン・通貨・為替等で変動するため見積で確定」と注記推奨（同ページに記載）。 citeturn0search1

### 3.2 操作（トランザクション）コストの考え方
Blob Storage は「保存量」以外に「操作回数（読み取り/書き込み等）」でも課金されます（同ページの表に記載）。 citeturn0search1

- **推奨運用（コストを抑える）**：  
  1行ずつをオブジェクト化せず、**大きめのファイル単位（例：Parquet分割）**で入出力し、API呼び出し回数を抑える。
- **リスク運用（コストが膨らむ）**：  
  23万件を「小さなオブジェクトの大量読み書き」で処理すると、操作回数課金が相対的に増えます。

> 本資料の後段では、操作回数課金は「数ドル〜十数ドル程度に収まる」前提（ファイル単位入出力）で**概算レンジ**として扱います。

---

## 4. Azure Functions（Consumption）実行コスト（概算）

### 4.1 試算の置き方（GB-s）
- 総GB-s ＝（割当メモリGB）×（実行秒数の総和）
- 23万件を **複数回** 回す前提（例：Seed 10% を2回、全件を2回）  
  - 反復回数は品質要件で増減します

### 4.2 シナリオ別（Azure課金のみ）
以下は「Azure上での実行コスト」だけを見た概算です（人件費は含みません）。

| シナリオ | 想定処理の重さ（例） | 総GB-s（概算） | 無料枠考慮（400k GB-s/月） | 無料枠なし（最大側） |
|---|---|---:|---:|---:|
| ライト | ルールベース正規化中心（文字種統一、辞書置換、簡易名寄せ） | 101,200 | **$0** | 約 **$1.62** |
| 標準 | ルール＋統計的処理（類似度計算、反復調整が多め） | 1,518,000 | 約 **$17.89** | 約 **$24.29** |
| ヘビー | 反復多い／計算重い（複数回の全件再処理） | 4,416,000 | 約 **$64.26** | 約 **$70.66** |

- 単価（参考）：Functions pricing の例「1.1 million GB-s → $17.6」から **$0.000016/GB-s** として計算（$17.6 ÷ 1,100,000）。 citeturn2view1  
- 実行回数の無料枠（1,000,000実行/月）もありますが、ここでは主にGB-sで評価しています（実行回数課金の単価はページ上で動的表示のため、本資料では最大側に寄せず除外）。 citeturn2view1

---

## 5. まとめ（Azureコスト試算レンジ）

### 5.1 初期クレンジング（Azure課金のみ・概算）
- **ストレージ保存（Hot 5GB）**：$0.09 / 月（ほぼ無視できる） citeturn0search1  
- **実行（Functions Consumption）**：  
  - 無料枠が使えるなら：**$0〜$64 程度**（シナリオ次第） citeturn2view1  
  - 無料枠を使わない最大側でも：**$2〜$71 程度**（シナリオ次第） citeturn2view1  
- **操作回数・ログ**：設計次第（ファイル単位入出力なら数ドル程度に収まりやすい） citeturn0search1

> 重要：本ユースケースの「初期コスト」の多くは通常 **人件費（辞書・マスタ設計と反復）**であり、  
> Azure課金（バッチ実行＋保存）単体は相対的に小さくなりやすい点に留意してください。

---

## 6. 提案書に貼れる文言（例）
23万件の保全データクレンジングをAzure上で実行する際のAzure課金（計算資源＋保存）の概算は、Azure Functions（Consumption）とBlob Storageを前提とすると、無料枠の利用可否や処理の重さにより **概ね数ドル〜数十ドル規模**となる。  
ただし、Blob操作回数や監視ログ量、生成AIを用いた分類（Azure OpenAI等）を実施する場合は課金構造が変わるため、別途見積で確定する。 citeturn2view1turn0search1
