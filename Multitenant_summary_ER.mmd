erDiagram
    TENANT {
        string tenant_id PK
        string name
        string kb_namespace
        string vectordb_namespace
        string llm_model
        string guardrail_profile
        string groups[]    %% グループ情報を直接配列で保持
        string acls[]      %% ACL情報を直接配列で保持
    }

    TENANT_GROUP_MAPPING {
        string tenant_id FK
        string group_name
    }

    TENANT_ACL {
        string tenant_id FK
        string acl_key
    }

    GUARDRAIL_PROFILE {
        string profile_id PK
        json rules
    }

    DOCUMENT {
        string doc_id PK
        string tenant_id FK
        string kb_namespace
        json metadata
    }

    %% 関係
    TENANT ||--o{ TENANT_GROUP_MAPPING : has
    TENANT ||--o{ TENANT_ACL : defines
    TENANT ||--o{ DOCUMENT : owns
    TENANT ||--|| GUARDRAIL_PROFILE : uses

