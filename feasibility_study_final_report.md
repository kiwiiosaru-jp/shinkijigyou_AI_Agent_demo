# スマートメーター合成データ生成 フィジビリティスタディ 最終報告書

**作成日**: 2026年1月29日
**バージョン**: v8.2
**実行環境**: ローカル (MacBook) + Google Colab (GPU)

---

## 1. エグゼクティブサマリー

### 1.1 目的
スマートメーターデータの**高精度な合成データ生成手法**を検証し、実用的な推奨手法を特定する。

### 1.2 結論

| 項目 | 推奨手法 | 理由 |
|------|----------|------|
| **合成データ生成** | Bootstrap | 最高品質・最速・実用的 |
| **予測モデル（実データあり）** | LightGBM | 最高精度 |
| **予測モデル（実データ少）** | Chronos FT | 汎化性能が高い |

### 1.3 主要な発見

1. **Bootstrap method が最強** - 実データからのリサンプリングが最も効果的
2. **DDPM（拡散モデル）は非推奨** - 50倍の計算コストで品質向上なし
3. **Digital Twin は中程度** - 物理モデルでも実データの複雑さを再現困難
4. **Chronos-Bolt + FTが汎化性能で優位** - 事前学習の恩恵が大きい

---

## 2. 検証手法

### 2.1 合成データ生成手法

| 手法 | 概要 | 計算コスト |
|------|------|-----------|
| **Bootstrap** | 実データからの条件付きリサンプリング + 差分プライバシー | 1x（基準） |
| **DDPM** | 拡散モデルによる生成（カスタム実装） | 50x |
| **Digital Twin** | 物理モデルベースのシミュレーション（OCCTO統計準拠） | 10x |

### 2.2 予測モデル

| モデル | 概要 |
|--------|------|
| **LightGBM** | 勾配ブースティング決定木 |
| **Chronos-Bolt** | Amazon時系列基盤モデル（事前学習済み） |
| **Chronos FT** | Chronos + ファインチューニング |

### 2.3 評価指標

| 評価 | 説明 | 用途 |
|------|------|------|
| **TSTR/TRTR** | Train on Synthetic, Test on Real | 合成データの有用性評価 |
| **TSDT/DTDT** | Train on Synthetic, Test on DT | DT正解での品質評価 |
| **ACF RMSE** | 自己相関関数の類似度 | 時系列特性の再現性 |
| **KS統計量** | 分布の類似度 | 統計的忠実性 |

---

## 3. 実験設定

### 3.1 データ仕様

| 項目 | 値 |
|------|-----|
| 世帯数 | 3,000 |
| 期間 | 60日間 |
| 時間粒度 | 30分間隔（48スロット/日） |
| PV普及率 | 12%（OCCTO統計準拠） |
| EV普及率 | 3%（次世代自動車振興センター準拠） |

### 3.2 DDPMモデル設定

| パラメータ | 値 |
|-----------|-----|
| タイムステップ | 200 |
| 隠れ層次元 | 256 |
| エポック数 | 50 |
| 学習環境 | Google Colab GPU |

### 3.3 Chronos設定

| パラメータ | 値 |
|-----------|-----|
| モデル | amazon/chronos-bolt-base |
| デバイス | CUDA (Colab) / CPU (ローカル) |
| FTサンプル数 | 1,000 |

---

## 4. 検証結果

### 4.1 合成データ生成手法の比較（TSTR評価）

**実データをテストとした評価**

| 手法 | RMSE | Ratio | 評価 |
|------|------|-------|------|
| TRTR（実データ） | 0.1080 | 1.000 | ベースライン |
| **TSTR-Bootstrap** | 0.1143 | **1.058** | 優秀 |
| TSTR-DT | 0.1263 | 1.169 | 中程度 |

**結論**: Bootstrap が最も実データに近い合成データを生成

### 4.2 DT正解評価（TSDT/DTDT）

| 評価 | RMSE | Ratio | 順位 |
|------|------|-------|------|
| DTDT（理想） | 0.2294 | 1.000 | - |
| **TSDT-Bootstrap** | 0.2520 | **1.098** | 🥇 |
| TSDT-DDPM | 0.2574 | 1.122 | 🥉 |

**結論**: Bootstrap > DDPM（DT正解評価でも同様）

### 4.3 予測モデル比較

**実データ評価**

| モデル | RMSE | 順位 |
|--------|------|------|
| **LightGBM (real)** | 0.0912 | 🥇 |
| LightGBM (synth) | 0.0994 | 🥈 |
| Chronos (ft-real) | 0.1072 | 🥉 |
| Chronos (ft-synth) | 0.1123 | 4位 |
| Chronos (zero-shot) | 0.1084 | - |

**DT正解評価**

| モデル | RMSE | 順位 |
|--------|------|------|
| **Chronos (ft-synth)** | 0.2173 | 🥇 |
| Chronos (zero-shot) | 0.2223 | 🥈 |
| DTDT | 0.2294 | 🥉 |
| TSDT-Bootstrap | 0.2521 | 4位 |

### 4.4 時系列特性の再現性（Fidelity）

| 手法 | ACF RMSE | KS統計量 | Profile相関 |
|------|----------|----------|-------------|
| **Bootstrap** | 0.1015 | **0.0606** | 0.8057 |
| DDPM | 0.1034 | 0.0791 | - |
| Digital Twin | - | 0.1358 | 1.0000 |

**結論**: Bootstrap が最も統計的特性を再現

### 4.5 総合比較表

| 手法 | 品質 | 速度 | 解釈性 | 推奨度 |
|------|------|------|--------|--------|
| **Bootstrap** | ★★★★★ | ★★★★★ | ★★★ | ★★★★★ |
| Digital Twin | ★★★ | ★★★ | ★★★★★ | ★★★ |
| DDPM | ★★ | ★ | ★ | ★★ |

---

## 5. 考察

### 5.1 Bootstrap が最強である理由

1. **実データの統計構造を直接継承** - リサンプリングにより元データの複雑なパターンを保持
2. **条件付き生成が効果的** - 世帯属性・時間帯・季節を考慮した生成
3. **差分プライバシーとの相性** - ノイズ付加が自然に統合可能
4. **計算効率** - GPUなしでも高速実行可能

### 5.2 DDPM が期待を下回った理由

1. **学習データの不足** - 3,000世帯×60日では拡散モデルの学習に不十分
2. **時系列特有の構造を捉えきれない** - 日内パターン、週パターンの学習が困難
3. **計算コストと品質のトレードオフ** - 50倍の時間をかけても品質向上なし

### 5.3 Digital Twin の限界

1. **パラメータ化の限界** - OCCTO統計は平均的な傾向のみ
2. **個別世帯の多様性** - 実データの異質性を物理モデルで表現困難
3. **突発的イベント** - 機器故障、特殊な使用パターンの再現が困難

### 5.4 Chronos FT の強み

1. **事前学習の恩恵** - 大規模時系列コーパスでの学習済み
2. **ドメイン適応** - 少量のFTで電力ドメインに特化可能
3. **汎化性能** - 未知のパターンにも対応可能

---

## 6. 推奨アーキテクチャ

### 6.1 実運用システム構成

```
┌─────────────────────────────────────────────────────────┐
│                    実データ収集                          │
│              (スマートメーター)                          │
└─────────────────┬───────────────────────────────────────┘
                  │
                  ▼
┌─────────────────────────────────────────────────────────┐
│              Bootstrap合成データ生成                     │
│    - 条件付きリサンプリング                              │
│    - 差分プライバシー (ε=8.0)                           │
│    - 特徴マッチング補正                                  │
└─────────────────┬───────────────────────────────────────┘
                  │
          ┌───────┴───────┐
          ▼               ▼
┌─────────────────┐ ┌─────────────────┐
│   LightGBM      │ │   Chronos FT    │
│ (高精度予測)    │ │ (汎化予測)      │
└─────────────────┘ └─────────────────┘
```

### 6.2 ユースケース別推奨

| ユースケース | 推奨構成 |
|-------------|----------|
| **リアルタイム予測** | LightGBM + 実データ |
| **データ拡張** | Bootstrap合成 + Chronos FT |
| **プライバシー保護データ共有** | Bootstrap + DP (ε=8.0) |
| **シミュレーション研究** | Digital Twin |

---

## 7. 今後の課題

### 7.1 短期課題

- [ ] Bootstrap生成パラメータの最適化
- [ ] Chronos FTのハイパーパラメータチューニング
- [ ] 差分プライバシーεの最適値検証

### 7.2 中期課題

- [ ] より大規模データセットでのDDPM再検証
- [ ] 季節変動（年間データ）への対応
- [ ] リアルタイム生成パイプラインの構築

### 7.3 長期課題

- [ ] マルチモーダル生成（電力+気象+行動）
- [ ] 因果推論を考慮した合成データ生成
- [ ] 連合学習との統合

---

## 8. 結論

本フィジビリティスタディにより、スマートメーター合成データ生成において**Bootstrap method**が最も効果的であることが実証された。

### 最終推奨

| 要素 | 推奨 | 代替案 |
|------|------|--------|
| **合成データ生成** | Bootstrap | Digital Twin |
| **予測モデル（精度重視）** | LightGBM | - |
| **予測モデル（汎化重視）** | Chronos FT | Chronos zero-shot |
| **プライバシー保護** | 差分プライバシー (ε=8.0) | - |

### 投資対効果

| 手法 | 開発コスト | 運用コスト | 品質 | ROI |
|------|-----------|-----------|------|-----|
| Bootstrap | 低 | 低 | 高 | ★★★★★ |
| DDPM | 高 | 高 | 中 | ★ |
| Digital Twin | 中 | 中 | 中 | ★★★ |

**本検証により、実用的かつ高品質な合成データ生成の実現可能性が確認された。**

---

## 付録

### A. 実行環境

| 環境 | 仕様 |
|------|------|
| ローカル | MacBook (CPU) |
| Colab | Google Colab Pro (GPU: T4/V100) |
| Python | 3.11 |
| PyTorch | 2.x |
| Chronos | 2.2.2 |

### B. 生成ノートブック

| ファイル | 説明 |
|----------|------|
| `feasibility_study_design_v8_2.ipynb` | 最終版（ローカル実行用） |
| `feasibility_study_design_v8_1_colab.ipynb` | Colab版（GPU実行用） |

### C. 参考文献

- OCCTO（電力広域的運営推進機関）需給データ
- 資源エネルギー庁 電力消費統計
- Amazon Chronos: Learning the Language of Time Series (2024)
- Denoising Diffusion Probabilistic Models (Ho et al., 2020)

---

**報告書作成**: Claude Code (Anthropic)
**検証実施**: フィジビリティスタディチーム
